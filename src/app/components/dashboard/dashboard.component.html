<div id="dashboard-wrapper">
  <button mat-flat-button (click)="onAddBill()">Create a Bill</button>
  <button mat-flat-button (click)="deleteSelectedBills()">Delete Selected Bills</button>



  <div id="bills-list-wrapper" class="mat-elevation-z3">
<!--    <form [formGroup]="billForm">-->
<!--      <mat-form-field appearance="outline" subscriptSizing="dynamic" class="small">-->
<!--        <input formControlName="name" matInput type="text" placeholder="name">-->
<!--      </mat-form-field>-->
<!--      <mat-form-field appearance="outline"  subscriptSizing="dynamic" class="small">-->
<!--        <input formControlName="amount" matInput type="text" placeholder="amount">-->
<!--      </mat-form-field>-->
<!--      <mat-form-field appearance="outline"  subscriptSizing="dynamic" class="small">-->
<!--        <input formControlName="date" matInput type="text" placeholder="date">-->
<!--      </mat-form-field>-->
<!--      <mat-form-field appearance="outline"  subscriptSizing="dynamic" class="small">-->
<!--        <input formControlName="necessity" matInput type="text" placeholder="necessity">-->
<!--      </mat-form-field>-->
<!--      <mat-form-field appearance="outline"  subscriptSizing="dynamic" class="small">-->
<!--        <input formControlName="category" matInput type="text" placeholder="category">-->
<!--      </mat-form-field>-->
<!--    </form>-->
    <table id="bills-table" mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let bill">
          <input class="bill-field" [ngClass]="{disabled: isDisabled(+bill.id)}" type="text" [value]="bill.name" [disabled]="isDisabled(+bill.id)">
        </td>
      </ng-container>

      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef> Amount </th>
        <td mat-cell *matCellDef="let bill">
          <input class="bill-field" [ngClass]="{disabled: isDisabled(+bill.id)}" type="text" [value]="bill.amount" [disabled]="isDisabled(+bill.id)">
        </td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let bill">
          <input class="bill-field" [ngClass]="{disabled: isDisabled(+bill.id)}" type="text" [value]="bill.date" [disabled]="isDisabled(+bill.id)">
        </td>
      </ng-container>

      <ng-container matColumnDef="necessity">
        <th mat-header-cell *matHeaderCellDef> Necessity </th>
        <td mat-cell *matCellDef="let bill">
          <input class="bill-field" [ngClass]="{disabled: isDisabled(+bill.id)}" type="text" [value]="bill.necessity" [disabled]="isDisabled(+bill.id)">
        </td>
      </ng-container>

      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef> Category </th>
        <td mat-cell *matCellDef="let bill">
<!--          <input type="text"  [value]="bill.category">-->
<!--          <mat-form-field>-->
            <mat-select [(value)]="bill.category" [disabled]="isDisabled(+bill.id)">
              <mat-option *ngFor="let category of category | keyvalue" [value]="category.value">{{ category.key }}</mat-option>
            </mat-select>
<!--          </mat-form-field>-->
          <div class="bill-hover-menu">
            <mat-icon [fontIcon]="getIcon('left', +bill.id)" (click)="leftFunction(+bill.id, bill)"></mat-icon>
            <mat-icon [fontIcon]="getIcon('right', +bill.id)" (click)="rightFunction(+bill.id)"></mat-icon>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky:true"></tr>
      <tr
        mat-row
        [ngClass]="{selected: billsToDelete.includes(parseInt(index.id))}"
        *matRowDef="let row; let index; columns: columnsToDisplay;">
      </tr>
    </table>
  </div>
</div>
